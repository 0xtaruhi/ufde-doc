---
title: 编译与构建
description: 从环境准备到 Rabbit 桌面端的完整构建流程
---

<div className="fd-steps [&_h3]:fd-step">

### 准备依赖

安装 [Qt 6.5+](https://www.qt.io/product/qt6)、[xmake](https://xmake.io/#/)、[C++17 编译器](https://en.cppreference.com/w/cpp/compiler_support)和[Rust 工具链](https://www.rust-lang.org/zh-CN/tools/install)。

### 获取源码

```bash
git clone https://github.com/0xtaruhi/Rabbit.git
cd Rabbit
git submodule update --init --recursive
```

最后一步操作会自动下载使用 Rust 编写的 USB 驱动库[vlfd-rs](https://github.com/0xtaruhi/vlfd-rs)的 C FFI 绑定 [vlfd-ffi](https://github.com/0xtaruhi/vlfd-ffi)。
该绑定可以单独使用，以跳过 Rabbit 自行使用 C/C++等编程语言控制开发板。

### 配置 Qt 并编译

```bash
xmake f --qt=/path/to/Qt/<version> -v
xmake build
```

切换构建类型：

```bash
xmake f -m debug   # 调试构建
xmake f -m release # 发行构建
```

### 运行与调试

执行 `xmake run` 启动 GUI。连接开发板，并确认底部状态为 `USB Connected`。仅验证 GUI 时，可在设置中关闭波形生成。

![USB Status](/rabbit/images/MainWindow.png)

</div>

### 常用指令速查

| 命令                     | 作用                                    |
| ------------------------ | --------------------------------------- |
| `xmake f --qt=<路径> -v` | 为当前平台配置 Qt 并开启详细日志        |
| `xmake build`            | 依据 `xmake.lua` 编译 Rabbit 可执行文件 |
| `xmake run`              | 运行最新构建产物并打开图形界面          |
| `xmake clean`            | 清理构建缓存，排查交叉编译问题时使用    |

### 故障排查

- **缺少 Qt 运行时**：Linux 出现 `libQt6Widgets.so.6` 错误时，安装 `libxcb-cursor0` 并确保 Qt 库目录位于 `LD_LIBRARY_PATH`。
- **波形文件覆盖**：波形开启时每次运行会覆写 `RabbitWaveForm.vcd`，需要保存记录请手动另存。
